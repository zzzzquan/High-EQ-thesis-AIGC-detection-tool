var TypeOf=typeof isHasDetailReport;if(TypeOf=="boolean"&&isHasDetailReport==true){FirstGenerateReport();var RefactorData=PaperPagination();RefactorHtml(RefactorData)}else{FirstProofGenerateReport();var RefactorData=PaperPagination();var finalArry=setArry(RefactorData);RefactorHtml(finalArry)}function FirstGenerateReport(){var a=0;var s='<div id="tit_1" class="section">';$.each(detailJsonData,function(n,{content:e,sectionCount:t,score:o}){if(t!=a){a=t;if(a!=1){s+=`</div><div id="tit_${a}" class="section">`}}if(e==="")return;if(typeof separateDetailJsonData!=="undefined"&&separateDetailJsonData[n]){$.each(separateDetailJsonData[n],function(t,e){let a=parseToHtml(n,o,e);s+=a})}else{let t=parseToHtml(n,o,e);s+=t}});s+="</div>";var t='<div class="jcjymywwzd"><div class="upkmzjakmc"><div class="stl_view">'+s+"</div></div></div>";$("#mbxsgxktna").append(t)}function parseToHtml(t,e,a){var a=a.replace(/[<>\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"});if(e<40){return"<span>"+a+"</span>"}else if(e<60){return'<a href="sentence_detail.html" target="right" data-id="'+t+'" data-score="'+e+'" id="pre_next_'+t+'"><span class="orange">'+a+"</span></a>"}else{return'<a href="sentence_detail.html" target="right" data-id="'+t+'" data-score="'+e+'" id="pre_next_'+t+'"><span class="red">'+a+"</span></a>"}}function FirstProofGenerateReport(){if(typeof separateProofJsonData!=="undefined"){var e=0;for(let t=0;t<proofJsonData.length;t++){if(!!proofJsonData[t+1]){if(proofJsonData[t].sentenceCount==proofJsonData[t+1].sentenceCount){proofJsonData[t].numCount=proofJsonData[t].sentenceCount+"-"+e;e++}else{proofJsonData[t].numCount=proofJsonData[t].sentenceCount+"-"+e;e=0}}else{proofJsonData[t].numCount=proofJsonData[t].sentenceCount+"-"+e}}for(var o in separateProofJsonData){var s=0;for(let n=0;n<proofJsonData.length;n++){if(proofJsonData[n].sentenceCount==o){let t="";if(proofJsonData[n].content.length<separateProofJsonData[o][s].length){let t=separateProofJsonData[o][s].substring(0,proofJsonData[n].content.length);let e=separateProofJsonData[o][s].substring(proofJsonData[n].content.length);let a=[t,e];proofJsonData[n+1].numCount=proofJsonData[n].numCount;separateProofJsonData[o].splice(s,1,...a)}else if(proofJsonData[n].content.length>separateProofJsonData[o][s].length){t=proofJsonData[n].content;proofJsonData[n].content=separateProofJsonData[o][s];proofJsonData.splice(n+1,0,{pid:proofJsonData[n].pid,content:t.substring(proofJsonData[n].content.length),sectionCount:proofJsonData[n].sectionCount,sentenceCount:proofJsonData[n].sentenceCount,maps:proofJsonData[n].maps,numCount:proofJsonData[n].numCount+n})}else if(proofJsonData[n].content.length==separateProofJsonData[o][s].length){t=""}if(!!proofJsonData[n+1]){if(proofJsonData[n+1].sentenceCount==proofJsonData[n].sentenceCount){s++}else{s=0}}}else{s=0}}}for(let t=0;t<proofJsonData.length;t++){if(proofJsonData[t].maps.length>0){if(!!proofJsonData[t-1]){proofJsonData[t].numCount==proofJsonData[t-1].numCount}}}proofJsonData.forEach(t=>{if(!separateProofJsonData[t.sentenceCount]){t.numCount=t.sentenceCount}})}let a=proofJsonData.reduce((t,e)=>{t[e.sectionCount]=t[e.sectionCount]?[...t[e.sectionCount],e]:[e];return t},{});var n=[];for(let t in a){n.push(a[t])}var r="";for(let t=0;t<n.length;t++){r+=`<div id = "tit_${t+1}" class="section">${t+1}</div>`}var t=`<div class="jcjymywwzd"><div class="upkmzjakmc noFize"><div class="stl_view">${r}</div></div></div>`;$("#mbxsgxktna").append(t);n.forEach((t,e)=>{var o="";t.forEach((t,e)=>{var a=t.content.replace(/[<>\&]/g,function(t){return"&#"+t.charCodeAt(0)+";"});if(a==="")return;if(t.maps.length<1){o+=`<span class="spaceWrap" data-sentenceCount=${t.sentenceCount} data-child=${t.numCount?t.numCount:t.sentenceCount}>${a}</span>`}else if(t.maps.length==1){if(t.maps[0].type=="innerDuplicate"){o+=`<span id=${t.maps[0].id} data-sentenceCount=${t.sentenceCount} data-child=${t.numCount?t.numCount:t.sentenceCount}><a href="proof_right.html#${t.pid?t.pid:t.maps[0].id}" class="noletter" target="right"><span class="spaceWrap proof_type ${t.maps[0].type} orange">${a}</span></a></span>`}else if(t.maps[0].type=="political"){o+=`<span id=${t.maps[0].id} data-sentenceCount=${t.sentenceCount} data-child=${t.numCount?t.numCount:t.sentenceCount}><a href="proof_right.html#${t.maps[0].id}" class="noletter" target="right"><span class="spaceWrap proof_type ${t.maps[0].type} red">${a}</span></a></span>`}else{o+=`<a href="proof_right.html#${t.maps[0].id}" class="noletter" id="${t.maps[0].id}" target="right" data-sentenceCount=${t.sentenceCount} data-child=${t.numCount?t.numCount:t.sentenceCount}><span class="spaceWrap proof_type ${t.maps[0].type}">${a}</span></a>`}}else if(t.maps.length==2){var n="";t.maps.forEach(t=>{if(t.type=="innerDuplicate"){n="orange"}else if(t.type=="political"){n="red"}});o+=`<span id=${t.maps[0].id} data-sentenceCount=${t.sentenceCount} data-child=${t.numCount?t.numCount:t.sentenceCount}><a href="proof_right.html#${t.maps[1].id}" class="noletter" id="${t.maps[1].id}" target="right"><span class="spaceWrap proof_type ${t.maps[0].type} ${t.maps[1].type} ${n}">${a}</span></a></span>`}});$(`#tit_${e+1}`).html(o)})}function setArry(e){var a=[];for(let t in e){a.push(e[t])}let n=[...a];for(let a=0;a<n.length;a++){var t;if(a+1<n.length){t=n[a][n[a].length-1].getAttribute("data-child");if(t){let e=n[a+1].map(t=>t.getAttribute("data-child")).lastIndexOf(t);if(e>-1){let t=n[a+1].splice(0,e+1);n[a].push(...t)}}continue}}return n}function PaperPagination(){var t=75,e=0,a=0;var n=[];var o=[];$.each($(".stl_view").children(),function(){e=$(this).offset().top;a=e-t;if(a>=960){n.push(o);o=[];t=$(this).offset().top}o.push(this)});n.push(o);return n}function RefactorHtml(t){$("#mbxsgxktna").html("");var n="";$.each(t,function(t,e){var a="";$.each(e,function(){a+=nodeToStr(this)});n+=`<div class="jcjymywwzd" id="${t+1}"><div class="upkmzjakmc"><div class="stl_view">${a}</div></div></div>`});$("#mbxsgxktna").append(n);$("#mbxsgxktna").append('<div id="Add_height" style="height:0;"></div>')}function nodeToStr(t){let e=document.createElement("div");e.appendChild(t.cloneNode(true));const a=e.innerHTML;e=t=null;return a}