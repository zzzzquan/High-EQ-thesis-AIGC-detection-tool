function parseSentence(e){var i=localCount=periodicalCount=degreeCount=conferenceCount=bookCount=netCount=otherCount=sbCount=newspaperCount=patentCount=foreignCount=shareCount=0;var t=[];e.result.forEach(e=>{i++;var r={score:e.score,similaritySegGreyList:e.similaritySegGreyList,originalSegGreyList:e.originalSegGreyList,similaritySentence:filterCharacter(e.similaritySentence),subSimilaritySentenceSection:filterCharacter(e.subSimilaritySentenceSection),simpleDetailJson:e.duplicateSourceMD5,articleType:e.articleType!="net"?e.articleType:"互联网",classification:e.classification,paperPassId:e.duplicateSourceMD5,urlShowType:e.urlShowType};if(r.articleType=="selfbuildplus")r.articleType="自建库";if(e.classification=="local"||e.classification=="selfbuildplus"){localCount++;switch(e.articleType){case"学术期刊":periodicalCount++;r.title=JSON.parse(simSource[e.duplicateSourceMD5]).title;r.simpleDetailJson=SentenceDetailParser.parsePeriodical(simSource[e.duplicateSourceMD5]);break;case"书籍数据":bookCount++;r.simpleDetailJson=SentenceDetailParser.parseBook(simSource[e.duplicateSourceMD5]);break;case"学位论文":degreeCount++;r.simpleDetailJson=SentenceDetailParser.parseThesis(simSource[e.duplicateSourceMD5]);break;case"学术会议":conferenceCount++;r.simpleDetailJson=SentenceDetailParser.parseConference(simSource[e.duplicateSourceMD5]);break;case"报纸":newspaperCount++;r.simpleDetailJson=SentenceDetailParser.parseNewspaper(simSource[e.duplicateSourceMD5]);break;case"专利":patentCount++;r.simpleDetailJson=SentenceDetailParser.parsePatent(simSource[e.duplicateSourceMD5]);break;case"外文":foreignCount++;r.articleType="外文库";r.simpleDetailJson=SentenceDetailParser.parseForeignLanguage(simSource[e.duplicateSourceMD5]);break;case"自建库":sbCount++;r.simpleDetailJson=SentenceDetailParser.parseSelfBuild(simSource[e.duplicateSourceMD5]);break;case"selfbuildplus":sbCount++;r.simpleDetailJson=SentenceDetailParser.parseSelfBuildPlus(simSource[e.duplicateSourceMD5]);break;case"共享联合库":shareCount++;r.simpleDetailJson=SentenceDetailParser.parseShareLibrary(simSource[e.duplicateSourceMD5]);break;case"大学生联合比对库":otherCount++;r.simpleDetailJson=SentenceDetailParser.parseUniversity();break}}else if(e.classification=="net"){netCount++;r.chuChu=JSON.parse(simSource[e.duplicateSourceMD5]).chuchu;r.title=JSON.parse(simSource[e.duplicateSourceMD5]).title}t.push(r)});if(i>0){var r={total:i,local:localCount,periodical:periodicalCount,degree:degreeCount,conference:conferenceCount,book:bookCount,net:netCount,sb:sbCount,patent:patentCount,foreign:foreignCount,other:otherCount+conferenceCount+newspaperCount,data:t,checkType:checkType,isSelfBuild:selfBuild,isOrg:isOrg,consumeType:consumeType,pid:ReportID,isHasReduceWord:isHasReduceWord,rewriteDegree:rewriteDegree,reportSource:reportSource,isPPEdu:isPPEdu,isShowRewrite:isShowRewrite}}r.content=filterCharacter(e.content);r.score=e.result[0].score;r.preCheckNum=e.preCheckNum;r.nextCheckNum=e.nextCheckNum;if(e.result[0].score>=40){r.reduceNum=e.reduceNum;r.synonymsContent=e.synonymsContent;r.segRedList=e.segRedList;r.newSegRedList=e.result[0].originalSegGreyList;if(typeof e.reduceOriginalContentList!="undefined"&&e.reduceOriginalContentList.length>0){r.reduceOriginalContentList=JSON.parse(JSON.stringify(e.reduceOriginalContentList));r.reduceOriginalContent="";r.reduceOriginalContentList.map(e=>{e.content=filterCharacter(e.content);r.reduceOriginalContent+=filterCharacter(e.content)})}if(typeof e.reduceResult!="undefined"&&e.reduceResult.length!=0){r.reduceResult=JSON.parse(JSON.stringify(e.reduceResult));r.reduceResult.map(r=>{r.reduceContent="";r.detailResult.map(e=>{e.reduceContent=filterCharacter(e.reduceContent);r.reduceContent+=filterCharacter(e.reduceContent)})})}else{r.reduceResult=[{degree:"high",wholeDropScore:0,wholeReduceScore:0,detailResult:[{reduceScore:0,reduceContent:""}]},{degree:"middle",wholeDropScore:0,wholeReduceScore:0,detailResult:[{reduceScore:0,reduceContent:""}]},{degree:"low",wholeDropScore:0,wholeReduceScore:0,detailResult:[{reduceScore:0,reduceContent:""}]}]}}return r}function wordsColor(e,u,r){var i="";var c=0;var l=false;var b=[];e.forEach(e=>{for(const o in e){if(Object.hasOwnProperty.call(e,o)){var r=e[o];var i=o;var t=i.length;var s=u.indexOf(i,c);if(s!==false&&s>=c){var n=s-c;if(n!=0){var a=u.substr(c,n);if(r=="1"&&l){b.push({s:a,c:true})}else{b.push({s:a,c:false})}c+=n}if(r=="1"){b.push({s:i,c:true});l=true}else{b.push({s:i,c:false});l=false}c+=t}}}});var t="";b.forEach(e=>{if(e["c"]){t=t+e["s"]}else{if(t!=""){i=i+r.replace("{%s}",t);t=""}i+=e["s"]}});if(t!=""){i=i+r.replace("{%s}",t)}return i}function subSimilaritySection(e,r){return e.replace(r,'<span class="g-font-color green">'+r+"</span>")}function scoreColor(e){if(e<40){return"green"}else if(e>=60){return"red"}else{return"orange"}}function updateDiffText(e,r,i=1){let t=JsDiff.diffChars(e,r);let s="";if(!i){t=t.filter(e=>!e.removed)}t.map(e=>{if(e.added){s+=`<span class="add">${e.value.replace(/[\r\n]+/g,"<br/>")}</span>`}else if(e.removed){s+=`<span class="remove">${e.value.replace(/[\r\n]+/g,"<br/>")}</span>`}else{s+=e.value.replace(/[\r\n]+/g,"<br/>")}});return s}function synonymsContent(e){var e=e.split("\r\n");e.pop();var r="";e.filter(function(e){var e=e.split(":");r+='<li class="g-font-color green"><span class="g-font-color red">'+e[0]+" ： </span>"+e[1]+"</li>"});return r}function formatTitle(e){if(e.articleType=="大学生联合比对库"){return""}return e.simpleDetailJson}function issetString(e){if(typeof e!=="undefined"&&e!=""){return true}else{return false}}function issetArray(e){if(typeof e!=="undefined"&&e.length!=0){return true}else{return false}}var SentenceDetailParser={parsePeriodical:function(e){if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+='<div class="source-detail-title"><b>篇名：</b><span>《'+e.title+"》</span></div>"}if(issetArray(e.author)){r+="<b>作者：</b>"+e.author.toString()+"<br>"}if(issetString(e.chuchu)){r+="<b>期刊名称：</b>"+e.chuchu+"<br>"}if(issetString(e.year)){r+="<b>日期：</b>"+e.year;if(issetString(e.issue)){r+="年"+e.issue+"期"}r+="<br>"}if(issetString(e.column)){r+="<b>期刊栏目：</b>"+e.column+"<br>"}if(issetString(e.page)){r+="<b>页码：</b>"+e.page+"<br>"}if(issetString(e.pageNum)){r+="<b>页数：</b>"+e.pageNum+"页<br>"}if(issetString(e.cLCNumber)){r+="<b>分类号：</b>"+e.cLCNumber+"<br>"}if(issetArray(e.fundInfo)){r+="<b>基金项目：</b>"+e.fundInfo.toString()+"<br>"}if(issetString(e.publicationDate)){r+="<b>出版时间：</b>"+e.publicationDate+"<br>"}var i=[];if(!(typeof e.isCoreISTIC=="undefined")&&e.isCoreISTIC==1){i.push("ISTIC")}if(!(typeof e.isCoreNJU=="undefined")&&e.isCoreNJU==1){i.push("CSSCI")}if(!(typeof e.isCorePKU=="undefined")&&e.isCorePKU==1){i.push("PKU")}if(!(typeof e.isCoreSCI=="undefined")&&e.isCoreSCI==1){i.push("SCI")}if(!(typeof e.isCoreEI=="undefined")&&e.isCoreEI==1){i.push("EI")}if(i.length!=0){r+="<b>期刊级别：</b>"+i.toString()+"<br>"}if(issetString(e.iSSN)){r+="<b>ISSN：</b>"+e.iSSN+"<br>"}return r}},parseThesis:function(e){if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+="<b>篇名：</b>《"+e.title+"》"+"<br>"}if(issetArray(e.author)){r+="<b>作者：</b>"+e.author.toString()+"<br>"}if(issetString(e.chuchu)){r+="<b>授予单位：</b>"+e.chuchu+"<br>"}if(issetString(e.year)){r+="<b>年份：</b>"+e.year+"<br>"}if(issetString(e.degree)){r+="<b>授予学位：</b>"+e.degree+"<br>"}if(issetString(e.cLCNumber)){r+="<b>分类号：</b>"+e.cLCNumber+"<br>"}if(issetArray(e.authorSubject)){r+="<b>学科专业：</b>"+e.authorSubject+"<br>"}if(issetArray(e.teacherName)){r+="<b>导师姓名：</b>"+e.teacherName.toString()+"<br>"}return r}},parseConference:function(e){if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+="<b>篇名：</b>《"+e.title+"》"+"<br>"}if(issetArray(e.author)){r+="<b>作者：</b>"+e.author.toString()+"<br>"}if(issetString(e.conference)){r+="<b>会议名称：</b>"+e.conference+"<br>"}if(issetArray(e.convener)){r+="<b>主办单位：</b>"+e.convener.toString()+"<br>"}if(issetString(e.conferenceDate)){r+="<b>时间：</b>"+e.conferenceDate+"<br>"}if(issetString(e.conferenceLocus)){r+="<b>会议地点：</b>"+e.conferenceLocus+"<br>"}return r}},parseBook:function(e){if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.category)){r+="<b>章节：</b>"+e.category+"<br>"}if(issetString(e.title)){r+="<b>书名：</b>《"+e.title+"》<br>"}if(issetArray(e.author)){r+="<b>作者：</b>"+e.author.toString()+"<br>"}if(issetString(e.publisher)){r+="<b>出版社：</b>"+e.publisher+"<br>"}if(issetString(e.publicationDate)){r+="<b>时间：</b>"+e.publicationDate+"<br>"}if(issetString(e.iSBN)){r+="<b>ISBN：</b>"+e.iSBN+"<br>"}return r}},parseSelfBuild:function(e){if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+="<b>篇名：</b>《"+e.title+"》<br>"}if(issetArray(e.author)){r+="<b>作者：</b>"+e.author.toString()+"<br>"}if(issetString(e.publicationDate)){r+="<b>发表时间：</b>"+e.publicationDate+"<br>"}if(issetArray(e.chuchu)){r+="<b>出处：</b>"+e.chuchu+"<br>"}return r}},parseSelfBuildPlus:function(e){if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+="<b>篇名：</b>《"+e.title+"》<br>"}if(issetString(e.contentLengthString)){r+="<b>长度：</b>"+e.contentLengthString+"<br>"}if(issetString(e.publicationDate)){r+="<b>上传时间：</b>"+e.publicationDate+"<br>"}if(issetArray(e.chuchu)){r+="<b>出处：</b>自建库["+e.chuchu+"]<br>"}return r}},parseUniversity:function(){res="<b>来源：</b>大学生联合比对库<br>";return res},parseNewspaper:e=>{if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+='<div class="source-detail-title"><b>标题：</b><span>《'+e.title+"》</span></div>"}if(issetArray(e.author)){r+="<b>作者：</b>"+e.author.toString()+"<br>"}if(issetString(e.newsPaperName)){r+="<b>报纸名称：</b>"+e.newsPaperName+"<br>"}if(issetString(e.newsPaperDate)){r+="<b>发行日期：</b>"+e.newsPaperDate+"<br>"}return r}},parsePatent:e=>{if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+='<div class="source-detail-title"><b>专利名称：</b><span>《'+e.title+"》</span></div>"}if(issetString(e.patType)){r+="<b>专利类型：</b>"+e.patType+"<br>"}if(issetString(e.appNum)){r+="<b>申请(专利)号：</b>"+e.appNum+"<br>"}if(issetString(e.appDate)){r+="<b>申请日：</b>"+e.appDate+"<br>"}if(issetString(e.pubNum)){r+="<b>授权公布号：</b>"+e.pubNum+"<br>"}if(issetString(e.pubDate)){r+="<b>授权公告日：</b>"+e.pubDate+"<br>"}if(issetArray(e.applicantName)){r+="<b>申请人：</b>"+e.applicantName.toString()+"<br>"}if(issetArray(e.inventorName)){r+="<b>发明人：</b>"+e.inventorName.toString()+"<br>"}if(issetString(e.ipc)){r+="<b>分类号：</b>"+e.ipc+"<br>"}if(issetString(e.mainIpc)){r+="<b>主分类号：</b>"+e.mainIpc+"<br>"}if(issetString(e.proCode)){r+="<b>国省代码：</b>"+e.proCode+"<br>"}if(issetString(e.page)){r+="<b>页数：</b>"+e.page+"<br>"}return r}},parseForeignLanguage:e=>{if(issetString(e)){var r="";e=JSON.parse(e);if(issetString(e.title)){r+='<div class="source-detail-title"><b>篇名：</b><span>《'+e.title+"》</span></div>"}if(issetArray(e.author)){r+="<b>作者：</b>"+e.author.toString()+"<br>"}if(issetString(e.chuchu)){r+="<b>期刊名称：</b>"+e.chuchu+"<br>"}if(issetString(e.year)){r+="<b>出版日期：</b>"+e.year;if(issetString(e.issue)){r+="年"+e.issue+"期"}r+="<br>"}if(issetString(e.column)){r+="<b>期刊栏目：</b>"+e.column+"<br>"}if(issetString(e.page)){r+="<b>页码：</b>"+e.page+"<br>"}if(issetString(e.pageNum)){r+="<b>页数：</b>"+e.pageNum+"页<br>"}if(issetString(e.cLCNumber)){r+="<b>分类号：</b>"+e.cLCNumber+"<br>"}if(issetArray(e.fundInfo)){r+="<b>基金项目：</b>"+e.fundInfo.toString()+"<br>"}if(issetString(e.publicationDate)){r+="<b>出版时间：</b>"+e.publicationDate+"<br>"}var i=[];if(!(typeof e.isCoreISTIC=="undefined")&&e.isCoreISTIC==1){i.push("ISTIC")}if(!(typeof e.isCoreNJU=="undefined")&&e.isCoreNJU==1){i.push("CSSCI")}if(!(typeof e.isCorePKU=="undefined")&&e.isCorePKU==1){i.push("PKU")}if(!(typeof e.isCoreSCI=="undefined")&&e.isCoreSCI==1){i.push("SCI")}if(!(typeof e.isCoreEI=="undefined")&&e.isCoreEI==1){i.push("EI")}if(i.length!=0){r+="<b>期刊级别：</b>"+i.toString()+"<br>"}if(issetString(e.iSSN)){r+="<b>ISSN：</b>"+e.iSSN+"<br>"}return r}},parseShareLibrary:e=>{return""}};